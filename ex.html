<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <ul>
      <li>
        <span class="dropDown">Item 1</span>
        <ul>
          <li>Sub Item 1.1</li>
          <li>Sub Item 1.2</li>
        </ul>
      </li>
      <li>
        <span class="dropDown">Item 2</span>
        <ul>
          <li>Sub Item 2.1</li>
          <li>Sub Item 2.2</li>
        </ul>
      </li>
      <li>
        <span class="dropDown">Item 3</span>
        <ul>
          <li>Sub Item 3.1</li>
          <li>Sub Item 3.2</li>
        </ul>
      </li>
      <li>
        <span class="dropDown">Item 4</span>
        <ul>
          <li>Sub Item 4.1</li>
          <li>Sub Item 4.2</li>
        </ul>
      </li>
    </ul>
    <style>
      ul li ul {
        display: none;
      }

      .on {
        display: block;
      }
    </style>
    <script>
      // 열리기 전
      let opened = null;

      // 클래스 리스트에 쇼
      const toggleVisibility = (e) => e.classList.toggle("on");

      const handleDropdown = (e) => {
        const clickedItem = e.parentElement.lastChild.previousSibling;

        toggleVisibility(clickedItem);

        if (!opened) {
          opened = clickedItem;
        } else if (opened == clickedItem) {
          opened = null;
        } else {
          toggleVisibility(opened);
          opened = clickedItem;
        }
      };

      const handleClick = (e) => {
        if (e.target.className.includes("dropDown")) {
          handleDropdown(e.target);
        } else if (opened) {
          toggleVisibility(opened);
          opened = null;
        }
      };

      document.addEventListener("click", handleClick);
    </script>
  </body>
</html>
